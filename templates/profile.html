<!DOCTYPE html>
<html lang="en">
    <head>
        <div class="head"></div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <title>UtadTube Inicio</title>
    </head>
    <body>
        <nav class="navbar" role="navigation" aria-label="main navigation">
        </nav>
        
        <section id="listaVideos"></section>

        <aside>Perfil</aside>

        <div class="modalChangePassword"></div>

        <script>
            $(document).ready(function () {
              $('.head').load('fragments/header.html');
              $('.navbar').load('fragments/navbar.html');
              $('.modalChangePassword').load('fragments/modals/changePasswordModal.html');

              var usuarioId = document.getElementById("usuarioId").value;

                var vres = "";
                var asd = $.get(
                    //"http://18.133.181.212/calculadora.php",
                    "https://6ceb939oi9.execute-api.eu-west-2.amazonaws.com/prueba_calculadora",

                    { op: "misvideos", usuarioId: usuarioId},
                    function (data) {
                    function jsonEscape(str) {
                        return str
                        .replace(/\n/g, "\\\\n")
                        .replace(/\r/g, "\\\\r")
                        .replace(/\t/g, "\\\\t");
                    }

                    //descomentar esta línea si se usa PHP :
                    //var json=JSON.parse(data);
                    //descomentar esta línea si se usa lambda-apigateway : var json=data;
                    var json = data;
                    alert("page content: " + JSON.stringify(json));
                    document.getElementById("res").innerHTML =
                        "Resultado recibido:" + json.res;
                    window.location.replace(json.redirect);
                    }
                )
                    .done(function () {
                    //añadir videos
                    alert("second success");
                    })
                    .fail(function () {
                       alert("error cargando videos");
                    });

                asd.always(function () {
                    alert("second finished");
                });
            });
        </script>
    </body>
</html>